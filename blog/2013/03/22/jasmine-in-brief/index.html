
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Jasmine 简介 - Blues 小站</title>
  <meta name="author" content="ShenYanchao">

  
  <meta name="description" content="专注于原创技术博客，并分享精品技术文章">
  <meta name="keywords" content="shenyanchao, karma, Java, Linux, selenium, webdriver, 设计模式, JavaEE, NodeJS">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.shenyanchao.cn/blog/2013/03/22/jasmine-in-brief">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Blues 小站" type="application/atom+xml">
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36243102-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">Blues 小站</a>

      <div class="nav-collapse">
        ﻿<ul class="nav">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">博客</a></li>
  <li><a href="/tags/">Tag云</a></li>
  <li><a href="/friends/">友情链接</a></li>
<li><a href="/messagebox/">留言板</a></li>
  <li><a href="/author/">关于我</a></li>
</ul>


        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com.hk/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:www.shenyanchao.cn" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      
<article class="hentry span9" role="article">

  ﻿
  <header class="page-header">
    
      <h1 class="entry-title">Jasmine 简介</h1>
    
	<p class="meta">
    

        








  


<time datetime="2013-03-22T15:47:00+08:00" pubdate data-updated="true">2013年03月22日 15:03:00</time>
        
         | <a href="#disqus_thread">我要评论</a>
        
    
 </p>
  </header>


<div class="entry-content"><h2>jasmine测试框架简介</h2>

<p><strong>jasmine</strong>是一种javascript测试框架，它既可以在html文件中运行，也可以和jsTestDriver整合，在jsTestDriver中运行。</p>

<h3>jasmine的简单语法</h3>

<p>一个基本的jasmine测试用例如下：</p>

<pre><code>describe("A suite", function() {  
    it("contains spec with an expectation", function() {  
    expect(true).toBe(true);  
    });  
});   
</code></pre>

<h4>describe方法</h4>

<p>describe方法标志着一个测试集(test suite)的开始，这个方法有两个参数，一个字符串String，一个方法function；字符串用来描述我们这个test suite，function里的东西就是测试代码，它们就是suite。</p>

<!--more-->


<h4>it方法</h4>

<p>jasmine中用方法it来开始specs（我理解成测试点，一个测试suite里可以有很多spec）。it方法和describe方法类似，同样有两个参数，一个String，一个function；String用来描述测试点（spec），function是具体的测试代码。一个测试点(spec)可以包含多个expections（其实是断言的意思）。</p>

<h4>expectations</h4>

<p>断言可以返回为true或者false。全部的断言返回true这个测试点就通过，一个或者多个断言返回false这个测试点就不通过。<br/>
describe和it都是方法，我们可以自定义一些变量，在describe中定义的变量，在it方法中可以直接使用。</p>

<pre><code>describe("A suite is just a function", function() {
var a;

it("and so is a spec", function() {
    a = true;

    expect(a).toBe(true);
});
});  
</code></pre>

<h4>Matchers</h4>

<p>一个一个的测试点们由expect开头，后面跟着一个我们需要测试的变量，如上面的a，然后跟着一个Matcher方法（我理解成校验规则），Matcher方法带着一个期望值，如上面的true。Matchers方法返回true或者false，它决定着测试点（spec）是否通过。所有的Matchers方法都能在mathcer前面加上not来进行否定断言，如`expect(a).not.toBe(true);</p>

<p>jasmine中有很多Matchers方法供我们使用，当然我们也可以定义自己的Matchers方法。</p>

<pre><code>describe("Included matchers:", function() {

    it("The 'toBe' matcher compares with ===", function() {
        var a = 12;
        var b = a;

        expect(a).toBe(b);
        expect(a).not.toBe(null);
    });  
    //上面的例子，比较a、b是否相等；验证a是否不是空。 

    it("should work for objects", function() {
        var foo = {
            a: 12,
            b: 34
        };
        var bar = {
            a: 12,
            b: 34
        };
        expect(foo).toEqual(bar);
    });
    //上面的例子比较了两个对象是否相等
});

it("The 'toMatch' matcher is for regular expressions", function() {
    var message = 'foo bar baz';

    expect(message).toMatch(/bar/);
    expect(message).toMatch('bar');
    expect(message).not.toMatch(/quux/);
});
//也可以使用正则表达式

it("The 'toBeDefined' matcher compares against `undefined`", function() {
    var a = {
        foo: 'foo'
    };

    expect(a.foo).toBeDefined();
    expect(a.bar).not.toBeDefined();
});
//验证变量是否被定义

it("The 'toBeNull' matcher compares against null", function() {
    var a = null;
    var foo = 'foo';

    expect(null).toBeNull();
    expect(a).toBeNull();
    expect(foo).not.toBeNull();
});
//验证是否为空

it("The 'toBeTruthy' matcher is for boolean casting testing", function() {
    var a, foo = 'foo';

    expect(foo).toBeTruthy();
    expect(a).not.toBeTruthy();
});

it("The 'toBeFalsy' matcher is for boolean casting testing", function() {
    var a, foo = 'foo';

    expect(a).toBeFalsy();
    expect(foo).not.toBeFalsy();
});
//变量是否能够转化成boolean变量？ 不太确定

it("The 'toContain' matcher is for finding an item in an Array", function() {
    var a = ['foo', 'bar', 'baz'];

    expect(a).toContain('bar');
    expect(a).not.toContain('quux');
});
//是否包含
it("The 'toBeLessThan' matcher is for mathematical comparisons", function() {
    var pi = 3.1415926, e = 2.78;

    expect(e).toBeLessThan(pi);
    expect(pi).not.toBeLessThan(e);
});

it("The 'toBeGreaterThan' is for mathematical comparisons", function() {
    var pi = 3.1415926, e = 2.78;

    expect(pi).toBeGreaterThan(e);
    expect(e).not.toBeGreaterThan(pi);
});
//数学大小的比较

it("The 'toBeCloseTo' matcher is for precision math comparison", function() {
var pi = 3.1415926, e = 2.78;

expect(pi).not.toBeCloseTo(e, 2);
expect(pi).toBeCloseTo(e, 0);
});
//两个数值是否接近，这里接近的意思是将pi和e保留一定小数位数后，是否相等。（一定小数位数：默认为2，也可以手动指定）

it("The 'toThrow' matcher is for testing if a function throws an exception", function() {
    var foo = function() {
    return 1 + 2;
    };
    var bar = function() {
        return a + 1;
    };

    expect(foo).not.toThrow();
    expect(bar).toThrow();
    });
}); 
//测试一个方法是否抛出异常  
</code></pre>

<h4>Setup和Teardown方法</h4>

<p>为了代码简洁，减少重复性的工作，jasmine提供<code>beforeEach</code>和<code>afterEach</code>方法。<code>beforeEach</code>会在每个spec之前执行，<code>after</code>会在每个spec之后执行，类似于selenium中的<code>beforeMethod</code>和<code>afterMethod</code>方法。</p>

<pre><code>describe("A spec (with setup and tear-down)", function() {
    var foo;

    beforeEach(function() {
        foo = 1;
    });

    afterEach(function() {
        foo = 0;
    });

    it("is just a function, so it can contain any code", function() {
        expect(foo).toEqual(1);
    });

    it("can have more than one expectation", function() {
        expect(foo).toEqual(1);
        expect(true).toEqual(true);
    });
});  
</code></pre>

<p>另外describe和it作为方法是可以嵌套的，也就是describe中可以出现子describe和it。</p>

<h4>禁用某些spec和suites</h4>

<p>在测试中，我们可能需要禁用一些suites和spec，方法是使用xdescribe和xit方法，这些测试的方法会被忽略，不计入统计结果。</p>

<h4>The Runner and Reporter</h4>

<p>Jasmine是用javascript实现的，所以它也必须在javascript的环境中运行，最简单的环境也就是一个web页面。所有的spec都可以在这个页面中运行，这个页面就叫做Runner。</p>

<p>Jasmine通过下面的js代码来展现spec运行结果：</p>

<pre><code>var htmlReporter = new jasmine.HtmlReporter(); //创建一个HTMLReporter
jasmineEnv.addReporter(htmlReporter);  

jasmineEnv.specFilter = function(spec) {  //一个过滤器，允许我们点击单个的suites，单独运行
return htmlReporter.specFilter(spec);
};  


var currentWindowOnload = window.onload;   //页面加载完毕后，执行所有的test。
window.onload = function() {
    if (currentWindowOnload) {
        currentWindowOnload();
    }

    document.querySelector('.version').innerHTML = jasmineEnv.versionString();
    execJasmine();
};

function execJasmine() {
        jasmineEnv.execute();
}
})();
</code></pre>

<hr />

<p>参考文献：<a href="http://pivotal.github.com/jasmine/">http://pivotal.github.com/jasmine/</a> <br/>
感谢：youthflies</p>
</div>


  <footer>
    <p class="meta">
      ﻿
  

<span class="byline author vcard"> <span class="fn">ShenYanchao</span> 发布于</span>

      








  


<time datetime="2013-03-22T15:47:00+08:00" pubdate data-updated="true">2013年03月22日 15:03:00</time>
      

<span class="categories">
	| 分类:
  
    <a class='category' href='/blog/categories/nodejs/'>nodejs</a>
  
</span>


	  

<span class="tags">
   | 标签:
  
    <a class='tag' href='/tags/jasmine/'>jasmine</a>, <a class='tag' href='/tags/nodejs/'>nodejs</a>
  
</span>

    </p>
    
      ﻿<div class="sharing">
  
  
  
<!-- Baidu Button BEGIN -->
<div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare">
<a class="bds_tsina"></a>
<a class="bds_renren"></a>
<a class="bds_qzone"></a>
<a class="bds_kaixin001"></a>
<a class="bds_hi"></a>
<a class="bds_douban"></a>
<a class="bds_tsohu"></a>
<a class="bds_tqq"></a>
<a class="bds_ty"></a>
<a class="bds_twi"></a>
<a class="bds_tieba"></a>
<span class="bds_more"></span>
<a class="shareCount"></a>
</div>
<br><br>
<script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6337598" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script>
<!-- Baidu Button END -->
  
  
  
  
  
</div>

    
    
    <section>
      <h1>讨论区</h1>
      <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    </section>
    
    <ul class="pager">
      
      <li class="previous"><a class="basic-alignment left"
        href="/blog/2013/03/22/qunit-in-brief/" title="Previous Post:
        Qunit 简介">&laquo; Qunit 简介</a></li>
      
      <li><a href="/blog/archives">博客</a></li>
      
      <li class="next"><a class="basic-alignment right" href="/blog/2013/03/22/jstestdriver-in-brief/"
        title="Next Post: JsTestDriver 简介">JsTestDriver 简介
        &raquo;</a></li>
      
    </ul>
  </footer>
</article>

<aside class="sidebar-nav span3">
  
    ﻿<section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">最近更新</li>
    
      <li class="post">
        <a href="/blog/2013/05/30/selenium-wiki-frequently-asked-questions/">selenium wiki:selenium常见问题</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/30/selenium-wiki-web-driver-js/">selenium wiki:webdriverJs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/30/selenium-wiki-advanced-user-interactions/">selenium wiki:高级用户交互</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/30/selenium-doc-selenium-web-driver/">selenium文档:selenium WebDriver</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/30/selenium-doc-selenium-rc/">selenium文档:selenium RC</a>
      </li>
    
  </ul>
</section>
<section class="well">
	<ul id="tags-cloud" class="nav nav-list">
	<li class="nav-header">分类云</li>
    <span id="tag-cloud"><a href='/blog/categories/apache' style='font-size: 102.5%'>apache(1)</a> <a href='/blog/categories/encode' style='font-size: 110.0%'>encode(4)</a> <a href='/blog/categories/git' style='font-size: 102.5%'>git(1)</a> <a href='/blog/categories/http' style='font-size: 105.0%'>HTTP(2)</a> <a href='/blog/categories/java' style='font-size: 102.5%'>Java(1)</a> <a href='/blog/categories/javascript' style='font-size: 102.5%'>javascript(1)</a> <a href='/blog/categories/jenkins' style='font-size: 102.5%'>jenkins(1)</a> <a href='/blog/categories/jmeter' style='font-size: 105.0%'>jmeter(2)</a> <a href='/blog/categories/jvm' style='font-size: 105.0%'>JVM(2)</a> <a href='/blog/categories/linux' style='font-size: 102.5%'>linux(1)</a> <a href='/blog/categories/markdown' style='font-size: 105.0%'>markdown(2)</a> <a href='/blog/categories/maven' style='font-size: 110.0%'>maven(4)</a> <a href='/blog/categories/mysql' style='font-size: 105.0%'>mysql(2)</a> <a href='/blog/categories/nodejs' style='font-size: 117.5%'>nodejs(7)</a> <a href='/blog/categories/selenium' style='font-size: 122.5%'>selenium(9)</a> <a href='/blog/categories/selenium-wiki' style='font-size: 107.5%'>selenium-wiki(3)</a> <a href='/blog/categories/selenium官方文档' style='font-size: 110.0%'>selenium官方文档(4)</a> <a href='/blog/categories/ubuntu' style='font-size: 102.5%'>ubuntu(1)</a> <a href='/blog/categories/个人' style='font-size: 105.0%'>个人(2)</a> <a href='/blog/categories/测试' style='font-size: 102.5%'>测试(1)</a> <a href='/blog/categories/设计模式' style='font-size: 160.0%'>设计模式(24)</a> </span>
  </ul>
</section>﻿<section class="well">
<ul class="nav nav-list">
  <li class="nav-header">最新评论</li>
  <script type="text/javascript" src="http://blueshen.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=200"></script>
</ul>
  </section><section class="well">
  <ul id="categories" class="nav nav-list">
    <li class="nav-header">文章分类</li>
    <li><a href='/blog/categories/apache'>apache (1)</a></li><li><a href='/blog/categories/encode'>encode (4)</a></li><li><a href='/blog/categories/git'>git (1)</a></li><li><a href='/blog/categories/http'>HTTP (2)</a></li><li><a href='/blog/categories/java'>Java (1)</a></li><li><a href='/blog/categories/javascript'>javascript (1)</a></li><li><a href='/blog/categories/jenkins'>jenkins (1)</a></li><li><a href='/blog/categories/jmeter'>jmeter (2)</a></li><li><a href='/blog/categories/jvm'>JVM (2)</a></li><li><a href='/blog/categories/linux'>linux (1)</a></li><li><a href='/blog/categories/markdown'>markdown (2)</a></li><li><a href='/blog/categories/maven'>maven (4)</a></li><li><a href='/blog/categories/mysql'>mysql (2)</a></li><li><a href='/blog/categories/nodejs'>nodejs (7)</a></li><li><a href='/blog/categories/selenium'>selenium (9)</a></li><li><a href='/blog/categories/selenium-wiki'>selenium-wiki (3)</a></li><li><a href='/blog/categories/selenium官方文档'>selenium官方文档 (4)</a></li><li><a href='/blog/categories/ubuntu'>ubuntu (1)</a></li><li><a href='/blog/categories/个人'>个人 (2)</a></li><li><a href='/blog/categories/测试'>测试 (1)</a></li><li><a href='/blog/categories/设计模式'>设计模式 (24)</a></li>
  </ul>
</section>
<section class="well">
  <ul id="gh_repos" class="nav">
    <li class="nav-header">GitHub Repos</li>
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/blueshen">@blueshen</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        github.showRepos({
            user: 'blueshen',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/asides/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo" class="page-footer">﻿<hr>
<p>
  版权所有 &copy; 2013 - ShenYanchao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>

</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'blueshen';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.shenyanchao.cn/blog/2013/03/22/jasmine-in-brief/';
        var disqus_url = 'http://www.shenyanchao.cn/blog/2013/03/22/jasmine-in-brief/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>









<!--
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F97aa7abbb3b568fb66ab76664b57b8ba' type='text/javascript'%3E%3C/script%3E"));
</script>
-->
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F81c9612f8fdceca45435ef7f5404d7b2' type='text/javascript'%3E%3C/script%3E"));
</script>


</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: jmeter | Blues 小站]]></title>
  <link href="http://www.shenyanchao.cn/tags/jmeter/atom.xml" rel="self"/>
  <link href="http://www.shenyanchao.cn/"/>
  <updated>2013-12-14T21:45:24+08:00</updated>
  <id>http://www.shenyanchao.cn/</id>
  <author>
    <name><![CDATA[ShenYanchao]]></name>
    <email><![CDATA[zhiyi.shen@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[从源码编译构建Jmeter]]></title>
    <link href="http://www.shenyanchao.cn/blog/2012/12/31/build-jmeter-from-sources/"/>
    <updated>2012-12-31T15:48:00+08:00</updated>
    <id>http://www.shenyanchao.cn/blog/2012/12/31/build-jmeter-from-sources</id>
    <content type="html"><![CDATA[<h3>获取Jmeter的源码</h3>

<p>Jmeter源码可以从SVN REPO找到，地址：<a href="http://svn.apache.org/repos/asf/jmeter/trunk/">http://svn.apache.org/repos/asf/jmeter/trunk/</a>  <br/>
从GIT上也是可以的。地址：<a href="https://github.com/apache/jmeter">https://github.com/apache/jmeter</a>  <br/>
Git clone:</p>

<pre><code>git clone git://github.com/apache/jmeter.git jmeter
</code></pre>

<p>这样就把Jmeter的源码给放到了本地的jmeter文件夹内。</p>

<h3>配置并编译Jmeter</h3>

<!--more-->


<p>进入Jmeter目录，有个build.xml文件，显然是用ant管理的。 <br/>
此时，如果把项目import到eclipse内，会发现缺失很多依赖的jar包。此时不禁感叹，为啥不直接用maven管理呢，这样就不用管这些了。我第一次操作的时候害的我还去下载了一个最新的发行版本，然后从里面找各种依赖的jar包。后来发现，开发者已经为我们想到了这个。执行ant命令就可以直接下载：</p>

<pre><code>ant download_jars
</code></pre>

<p>一段时间的等待后，各种jar包就下载好了。要耐心等待，这个过程要下载很多包的。</p>

<p>接下来吗？直接执行：</p>

<pre><code>ant install /ant clean install
</code></pre>

<p>提示BUILD SUCCESSFUL,这就表明已经编译成功了。</p>

<h3>运行Jmeter</h3>

<p>进入bin目录，执行jmeter.bat（windows）或者 ./jmeter（linux）,Jmeter的界面打开了，开始体验吧。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[jmeter 分布式 step by step]]></title>
    <link href="http://www.shenyanchao.cn/blog/2012/12/07/jmeter-distribution-step-by-step/"/>
    <updated>2012-12-07T13:25:00+08:00</updated>
    <id>http://www.shenyanchao.cn/blog/2012/12/07/jmeter-distribution-step-by-step</id>
    <content type="html"><![CDATA[<h3>环境准备</h3>

<ul>
<li>Jmeter(本文以2.8为例)</li>
<li>jdk 1.5+</li>
<li>多台机器<br/>
(假设3台，IP分别为：10.81.14.170，10.81.14.180，10.81.14.190)</li>
</ul>


<h3>工作原理</h3>

<p>1台机器做为总控机，其他机器作为节点机。总控机器，负责将JMX脚本分发到节点机上，各个节点同时独立运行，向服务发出压力，总控机可以获取并汇总报告。 <br/>
定义：</p>

<blockquote><p>总控机为<strong>client</strong>，我们（用户）只与这太机器打交道。或者称之为<strong>Master</strong>; <br/>
节点机器为<strong>server</strong>,它负责真正的向服务发出压力。或者称之为<strong>Slave</strong>;</p></blockquote>

<!--more-->


<p>这个只是角度不一样，就是一个总分结构。</p>

<h3>Slave配置</h3>

<p>假设这3台机器都作为slave，那么分别在各个机器上，
进入%JMETER HOME%/bin/目录   <br/>
运行: <br/>
jmeter-server.bat（windows） <br/>
jmeter-server.sh (linux)</p>

<h3>Master配置</h3>

<p>这里，我们以10.81.14.170作为Master,
进入%JMETER HOME%/bin/ 目录 <br/>
找到jmeter.properties文件，打开并找到remote_hosts=127.0.0.1这一行，修改为remote_hosts=127.0.0.1,10.81.14.180,10.81.14.190  <br/>
其中，IP部分指向slave,并以逗号分割。由于170这台机器同时也是slave而存在，因此直接写为127.0.0.1了。  <br/>
在目录下执行： <br/>
jmeter.bat (windows) <br/>
jmeter.sh (linux) <br/>
用来打开GUI界面。<br/>
点开运行->远程启动，将会看到这样的界面： <br/>
<img src="/images/blog/jmeter-remote.png" alt="Jmeter远程启动" /> <br/>
从这里就可以指定哪台slave来发压力了。当然也可以选择远程全部启动了。</p>

<h3>为什么要分布式发压力？</h3>

<p>1.单机运行受限，网络、CPU、内存读可能是瓶颈所在； <br/>
2.Jmeter是纯Java的程序，受JVM的一些限制；  <br/>
一般情况下，依据机器配置，单机的发压量为300～600，如果需要更大的并发，就需要使用分布式的多台机器同时加压。</p>

<h3>配置注意事项</h3>

<p>1.尽量保证各台机器之间的jmeter版本一致 <br/>
2.JDK／JRE要正确安装 <br/>
3.启动端口有可能被占用了，这个需要在启动时间指定SERVER_PORT</p>

<hr />

<p>参考文献： <br/>
<a href="http://jmeter.apache.org/usermanual/remote-test.html">http://jmeter.apache.org/usermanual/remote-test.html</a> <br/>
<a href="http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf">http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf</a></p>
]]></content>
  </entry>
  
</feed>